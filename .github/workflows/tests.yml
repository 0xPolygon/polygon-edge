---
name: Tests
on: # yamllint disable-line rule:truthy
  workflow_dispatch:
    inputs:
      unit-test:
        description: Unit Tests
        type: boolean
        default: true
      e2e-polybft-test:
        description: E2E PolyBFT Tests
        type: boolean
        default: true
      e2e-legacy-test:
        description: E2E Legacy Tests
        type: boolean
        default: true
      property-polybft-test:
        description: Property PolyBFT Tests
        type: boolean
        default: true
      fuzz-test:
        description: Fuzz Tests
        type: boolean
        default: true
  workflow_call:
    inputs:
      unit-test:
        description: Unit Tests
        type: boolean
        required: true
      e2e-polybft-test:
        description: E2E PolyBFT Tests
        type: boolean
        required: true
      e2e-legacy-test:
        description: E2E Legacy Tests
        type: boolean
        required: true
      property-polybft-test:
        description: Property PolyBFT Tests
        type: boolean
        required: true
      fuzz-test:
        description: Fuzz Tests
        type: boolean
        required: true
    outputs:
      unit-test:
        description: Unit Tests output
        value: ${{ jobs.unit-test.outputs.workflow_output }}
      e2e-polybft-test:
        description: E2E PolyBFT Tests output
        value: ${{ jobs.e2e-polybft-test.outputs.workflow_output }}
      e2e-legacy-test:
        description: E2E Legacy Tests output
        value: ${{ jobs.e2e-legacy-test.outputs.workflow_output }}
      property-polybft-test:
        description: Property PolyBFT Tests output
        value: ${{ jobs.property-polybft-test.outputs.workflow_output }}
      fuzz-test:
        description: Fuzz Tests output
        value: ${{ jobs.fuzz-test.outputs.workflow_output }}

jobs:
  unit-test:
    name: Unit Tests
    uses: ./.github/workflows/unit-test.yml
    if: ${{ inputs.unit-test == true }}
  e2e-polybft-test:
    name: E2E PolyBFT Tests
    uses: ./.github/workflows/e2e-polybft-test.yml
    if: ${{ inputs.e2e-polybft-test == true }}
  e2e-legacy-test:
    name: E2E Legacy Tests
    uses: ./.github/workflows/e2e-legacy-test.yml
    if: ${{ inputs.e2e-legacy-test == true }}
  property-polybft-test:
    name: Property PolyBFT Tests
    uses: ./.github/workflows/property-polybft-test.yml
    if: ${{ inputs.property-polybft-test == true }}
  fuzz-test:
    name: Fuzz Tests
    uses: ./.github/workflows/fuzz-test.yml
    if: ${{ inputs.fuzz-test == true }}
